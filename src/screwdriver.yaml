shared:
    image: node:8
    steps:
      - echo: echo hi
jobs:
  chain1:
    requires: [~pr, ~commit, ~sd@39:final]
  chain2:
    requires: [chain1]
  chain3:
    requires: [chain2]
  chain4:
    requires: [chain3]
  main:
    requires: [chain4]
    image: node:8
    steps:
      - echo: echo hi
      - meta: meta set example.main meow
  fork1:
    requires: [main]
    image: node:8
    steps:
      - echo: echo hi
      - meta: meta set example.coverage 1
  fork2:
    requires: [main]
    image: node:8
    steps:
      - echo: echo hi
      - meta: meta set example.coverage 2
  join:
    requires: [fork1, fork2]
    image: node:8
    steps:
      - echo: echo hi
      - meta_set: meta set example.join hi
      - meta: meta get example
